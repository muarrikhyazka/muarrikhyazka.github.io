<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Muarrikh Yazka</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,400,700"> 
    <link rel="stylesheet" href="fonts/icomoon/style.css">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/jquery-ui.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">


    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/style.css">

    <!-- add icon link -->
    <link rel = "icon" href = "images/icon_pink-01.png" type = "image/png">
    
  </head>
  <body>
  
  <div class="site-wrap">
    <header class="site-navbar" role="banner">
      
      <nav class="site-navigation text-right text-md-center" role="navigation">
        <div class="container">
          <ul class="site-menu js-clone-nav d-none d-md-block">
            <li>
              <a href="index.html">Home</a>
              
            </li>
            <li><a href="https://drive.google.com/file/d/1mybv3KZc5GQjI4e7CnS_fgtqpPUEgJPG/view?usp=share_link">Resume</a></li>
          </ul>
        </div>
      </nav>
    </header>


    <div class="site-section block-8 bg-light">
      <div class="container">
        <div class="row justify-content-center  mb-5">
          <div class="col-md-7 site-section-heading text-center pt-4">
            <h2>Monkeypox Data Pipeline Using Azure</h2>
          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/Azure Architecture.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            
           
            <p>The goal is want to put Monkeypox Data into a good data warehouse and data pipeline. Here on the left side is the architecture. We take the data from Outworld in Data, here is the link https://github.com/owid/monkeypox/blob/main/owid-monkeypox-data.csv . Actually, Azure Data Factory, Azure Databricks, and Azure Synapse Analytics can replace each other, but in this case just want to use all of these to give a clear picture of each tools/resources.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-0.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>First of all, we should create a data lake using storage account in Azure. You can type it on search bar on top. Just leave any configuration in default, you only change the region which near with you.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-01.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Create container and directory folder</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-02.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Next, we should create azure data factory. Its same with the way we create storage account. Make sure the region is same with storage account region. I will make azure data factory short with adf.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-03.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Launch Azure Data Factory Studio. Choose azure active directory, subscription, and adf.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-04.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Click Author menu on the left side. Click plus (+) icon and choose pipeline.</p>

          </div>
        </div>
        
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-2.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Basically pipeline that we need is migrating the data from external server into our data lake. Lets move to the steps. Find 'copy data' on activity bar, click and drag it into the workspace. Complete any configurations on the bottom side. Store the data on our container inside raw-data folder. After that click Publish All on blue button.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-3.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>We have done the pipeline. Next, we should set schedule when this pipeline running. You can set it on add trigger button > New/Edit. Because I only need to run it one time, so I just use Trigger Now feature to run the pipeline once at rigth now.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-6.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Voila! We can see the data that we need now is already on our data lake storage, it means the pipeline running succesfully.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-8.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Next phase, we will do transformation using Azure Databricks. First, we should create databricks. Its same with the way we create storage account and adf. Just make sure it has the same region as well.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-9.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Launch the workspace then.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-12.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Just a little bit explanation, in databricks we will use Apache Spark Computation. So we need to set how much parallel computing we need and other configuration in the machine. Go to compute and create new compute. Set the configuration and Click Create compute button. </p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-14.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>I forgot, We need to create connection between Storage Account and Azure Databricks. We should create app as connection and key vault to store any credential needed to access storage account.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-16.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Go to the app resource that we've created. On overview tab, there are some information that we need to keep, you can save it on notepad or your code editor, just copy paste. The information that need to kepp are Application (client) ID and Directory (tenant) ID. One important thing, we should grant access to this app on Storage Account and Azure Databricks as well.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-17.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Stil on app, move to Certificates & secrets tab. In here we will create secret key, just name it secretkey on description and leave other configuration as default.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-19.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>After secret key created, save the secret ID and paste it on notepad or code editor.</p>

          </div>
        </div>

        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-20.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>We will use all information that we've saved on databricks. But everyone who can access databricks can see that sensitive information if we only hardcode it on the notebook. So we need to secure that sensitive information and also we need to able to use that information in our notebook. For that objective, we need one resource/service that provided by Azure called Key Vault.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-21.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>First, we should create Key Vault resource. Its same with the way we create storage account, adf, and databrticks. Just make sure it has the same region as well. After that we create a key vault, just leave any configuration as default.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-23.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Keep Vault URI and Directory ID on your notepad or code editor, it will be needed in the future.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-24.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Move to Access Control (IAM) tab. Grant your access as Key Vault Administrator and app that we've created previously as Contributor.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-33.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Move to Access Policies tab. Grant Key Permissions to the app and Secret Permissions to Azure Databricks.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-25.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Move to secret tab and create it. Name it up to you and put any key and id on your notepad or code editor on secret value box.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-26.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>We should make it one by one until 3 secrets created there.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-27.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Next, we need to make connection between Key Vault and Azure Databricks. Go to https://{your databricks link}#secrets/createScope. Name it up to you and put the code/informatrion from key vault. Put the Vault URI code into DNS Name box and Directory ID into Resource ID box. Click Create button then.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-29.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Go back to workspace and create notebook. Type all code. dbutils.secrets.get(scope={put your scope name that we've created on databricks}, key={put your secret description/name on key vault}). Those command to take the credential that we've put on Key Vault Secret. All these code run to build mount/connection between Azure Databricks-App-Storage Account.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-34.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>After mounting succesfully built. We can read any data from storage account here, these are the code to read the data using spark. Actually in here I do some transformations such as adjust data type and fill empty values.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-341.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>After some transformations, we store the data into storage account but different directory with the raw data.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-36.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Here is the result on storage account. Data exported from spark is always contained with other files as well. Our data is on file named 'part...'. It can be multiple file depends on the partition configuration on spark.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-37.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Azure Synapse Analytics have same function with Azure Data Factory plus some Data wrangling and analytics function. We will create Azure SYnapse Analytics workspace for the next phase. Make sure have the same region with other esource.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-38.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>After Azure Synapse Analytics workspace created, on Overview tab click Open Synapse Studio. It will redirect you to new tab.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-39.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Basically it has the same UI with Azure Data Factory. Click plus icon and create external table from data lake.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-40.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Put table name up to you. On linked service and input file or folder box bring it to your storage account which is used to store spark exported data.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-41.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>Azure Synapse Analytics will automatically read the data with its right data type.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-42.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>You can run SQL Script here.</p>

          </div>
        </div>
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 mb-5">
            <img src="images/azure/azure-44.jpg" alt="Image placeholder" class="img-fluid rounded">
          </div>
          <div class="col-md-12 col-lg-5 text-center pl-md-5">
            <p>You can build chart as well here. Azure Synapse Analytics is a perfect and easy tool to wrangling and explore the data. Actually from here you can consume the data and bring it to any visualization platforms such as Power BI, Tablea, Looker, etc.</p>

          </div>
        </div>

      </div>
    </div>





    
    <footer class="site-footer border-top">
      <div class="container">
        
        <div class="row text-center">
          <div class="col-md-12">
            <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" class="text-primary">Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
          
        </div>
      </div>
    </footer>
  </div>

  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/jquery-ui.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>

  <script src="js/main.js"></script>
    
  </body>
</html>